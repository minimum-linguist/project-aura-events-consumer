apiVersion: v1
kind: ConfigMap
metadata:
  name: events-consumer-config
  labels:
    app: events-consumer
data:
  # Service Configuration
  NODE_ENV: 'production'
  PORT: '3003'

  # Kafka Configuration
  KAFKA_BROKERS: 'kafka-service:9092'
  KAFKA_CLIENT_ID: 'project-aura-events-consumer'
  KAFKA_GROUP_ID: 'events-mongodb-writer'
  KAFKA_EVENTS_TOPIC: 'events-v1'
  KAFKA_DLQ_TOPIC: 'events-v1-dlq'

  # MongoDB Configuration (non-sensitive parts)
  MONGODB_DATABASE: 'projectaura'
  MONGODB_COLLECTION: 'events'

  # Consumer Configuration
  CONSUMER_SESSION_TIMEOUT: '30000'
  CONSUMER_HEARTBEAT_INTERVAL: '3000'
  CONSUMER_MAX_BYTES_PER_PARTITION: '1048576'
  CONSUMER_AUTO_COMMIT: 'true'
  CONSUMER_AUTO_COMMIT_INTERVAL: '5000'

  # Batch Processing
  BATCH_SIZE: '100'
  BATCH_TIMEOUT_MS: '5000'

  # Circuit Breaker Configuration
  CIRCUIT_FAILURE_THRESHOLD: '5'
  CIRCUIT_SUCCESS_THRESHOLD: '2'
  CIRCUIT_TIMEOUT_MS: '30000'

  # Retry Configuration
  RETRY_INITIAL_DELAY: '1000'
  RETRY_MAX_DELAY: '30000'
  RETRY_MAX_ATTEMPTS: '3'
  RETRY_BACKOFF_MULTIPLIER: '2'

  # Monitoring
  ENABLE_METRICS: 'true'
  METRICS_PORT: '9090'
